{"version":3,"file":"form-builder.entry.esm.js","sources":["src/components/yaseer-form/utils/fieldMapper.ts","src/components/yaseer-form/utils/fieldEvaluator.ts","src/components/yaseer-form/components/form-builder/form-builder.component.css?tag=form-builder","src/components/yaseer-form/components/form-builder/form-builder.component.tsx"],"sourcesContent":["const mapper = new Map<string, any>([\r\n    ['legend', 'form-legend'],\r\n    ['input', 'input-field'],\r\n    ['password', 'input-field'],\r\n    ['select', 'select-field'],\r\n    ['textarea', 'textarea-field'],\r\n    ['checkbox', 'checkbox-field'],\r\n    ['toggle', 'toggle-field'],\r\n    ['date', 'date-field'],\r\n    ['radio', 'radio-field'],\r\n    ['phone', 'phone-number-field'],\r\n    ['file', 'file-field'],\r\n    ['number', 'number-field'],\r\n    ['typeahead', 'typeahead-field'],\r\n]);\r\n\r\nexport default mapper;","import { iEnableRule, iFormField } from \"../models/form-field.model\";\n\nexport default function evaluateRule(rule: iEnableRule, fieldsMap: Map<string, iFormField>): boolean {\n    const logic = rule.logic ?? 'AND';\n\n    const results = rule.conditions.map(condition => {\n        const targetField = fieldsMap.get(condition.fieldKey);\n        if (!targetField) return false;\n\n        const targetValue = targetField.value;\n\n        switch (condition.operator) {\n\n            case 'eq':      return targetValue === condition.value;\n            case 'neq':     return targetValue !== condition.value;\n            case 'gt':      return Number(targetValue) > Number(condition.value);\n            case 'lt':      return Number(targetValue) < Number(condition.value);\n            case 'isValid': return targetField.errors.length === 0;\n\n            case 'isNotEmpty':\n                return targetValue !== null &&\n                       targetValue !== undefined &&\n                       targetValue !== '' &&\n                       !(Array.isArray(targetValue) && targetValue.length === 0);\n\n            case 'isEmpty':\n                return targetValue === null ||\n                       targetValue === undefined ||\n                       targetValue === '' ||\n                       (Array.isArray(targetValue) && targetValue.length === 0);\n\n            case 'matches':\n                if (typeof targetValue !== 'string' || typeof condition.value !== 'string') {\n                    return false;\n                }\n                const regex = new RegExp(condition.value);\n                return regex.test(targetValue);\n                \n            default:\n                return false;\n        }\n    });\n\n    // apply AND / OR\n    if (logic === 'AND') {\n        return results.every(Boolean);\n    } else {\n        return results.some(Boolean);\n    }\n}\n","/* * {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n}\n\n.wd-custom-form {\n    padding-top: var(--form-builder-padding-top, 24px);\n    padding-right: var(--form-builder-padding-right, 16px);\n    padding-bottom: var(--form-builder-padding-bottom, 24px);\n    padding-left: var(--form-builder-padding-left, 16px);\n}\n\n.field-col-span-1 {\n    grid-column: span 1 / span 1;\n\n    @media (min-width: 575px) {\n        grid-column: span 1 / span 1;\n    }\n}\n\n.field-col-span-2 {\n    grid-column: span 1 / span 1;\n\n    @media (min-width: 575px) {\n        grid-column: span 2 / span 2;\n    }\n}\n\n.field-col-span-3 {\n    grid-column: span 1 / span 1;\n\n    @media (min-width: 575px) {\n        grid-column: span 3 / span 3;\n    }\n}\n\n.field-col-span-4 {\n    grid-column: span 1 / span 1;\n\n    @media (min-width: 575px) {\n        grid-column: span 4 / span 4;\n    }\n} */\n\n.form-fields-grid {\n    /* display: grid;\n    grid-template-columns: repeat(1, minmax(0, 1fr));\n    row-gap: var(--grid-y-gap, 24px);\n    column-gap: var(--grid-x-gap, 16px);\n\n    @media (min-width: 575px) {\n        grid-template-columns: repeat(4, minmax(0, 1fr));\n    } */\n\n    /* .field-error {\n        color: var(--field-error-color, #dc3545);\n        font-family: var(--field-error-font-family, sans-serif);\n        font-size: var(--field-error-font-size, 12px);\n        font-weight: var(--field-error-font-weight, 400);\n        margin-top: var(--field-error-margin-top, 0px);\n    }\n\n    label {\n        font-family: var(--form-field-label-font-family, sans-serif);\n        color: var(--form-field-label-color, #7b8895);\n        order: var(--form-field-label-order, 1);\n        position: var(--form-field-label-position, static);\n        top: var(--form-field-label-top, auto);\n        left: var(--form-field-label-left, auto);\n        bottom: var(--form-field-label-bottom, auto);\n        right: var(--form-field-label-right, auto);\n        display: inline-block;\n        font-weight: var(--form-field-label-font-weight, 400);\n        font-size: var(--form-field-label-font-size, 14px);\n        background-color: var(--form-field-label-bg-color, transparent);\n        padding: var(--form-field-label-padding, 0);\n        transition: all ease-out 0.4s;\n    } */\n\n    [class*=\"-form-field\"] {\n        /* padding-top: var(--form-field-padding-top, 0px);\n        padding-right: var(--form-field-padding-right, 0px);\n        padding-bottom: var(--form-field-padding-bottom, 0px);\n        padding-left: var(--form-field-padding-left, 0px);\n\n        display: flex;\n        flex-direction: var(--form-field-flex-direction, column);\n        gap: var(--form-field-gap, 8px); */\n\n        input,\n        select,\n        textarea {\n            /* width: 100%;\n            max-width: 100%;\n            height: var(--form-field-control-height, 48px);\n            border-top-left-radius: var(--form-field-control-border-top-left-radius, 0.25rem);\n            border-top-right-radius: var(--form-field-control-border-top-right-radius, 0.25rem);\n            border-bottom-left-radius: var(--form-field-control-border-bottom-left-radius, 0.25rem);\n            border-bottom-right-radius: var(--form-field-control-border-bottom-right-radius, 0.25rem);\n            background-color: var(--form-field-control-bg-color, #fff);\n            border: 1px solid var(--form-field-control-border-color, #ced4da);\n            order: var(--form-field-control-order, 2);\n            color: var(--form-field-control-text-color, #495057);\n            font-size: var(--form-field-control-font-size, 14px);\n            font-family: var(--form-field-font-family, sans-serif);\n            transition: all ease-out 0.4s; */\n\n            /* +label {\n                color: var(--form-field-label-color, #7b8895);\n            } */\n\n            /* &:focus {\n                background-color: var(--form-field-control-focus-bg-color, #fff);\n                border-color: var(--form-field-control-focus-border-color, #86b7fe);\n                outline: none;\n\n                +label {\n                    color: var(--form-field-control-focus-label-color, #5b89ce);\n                }\n            }\n\n            &.invalid {\n                background-color: var(--form-field-control-invalid-bg-color, rgba(255, 175, 200, 0.50));\n                border-color: var(--form-field-control-invalid-border-color, #dc3545);\n                color: var(--form-field-control-invalid-text-color, #463333);\n\n                +label {\n                    color: var(--form-field-control-invalid-label-color, #dc3545);\n                }\n            } */\n\n            /* &:disabled {\n                opacity: 0.6;\n                cursor: not-allowed;\n\n                +label {\n                    opacity: 0.6;\n                    cursor: not-allowed;\n                }\n            } */\n        }\n    }\n\n}\n\n/* .file-size-limit {\n    font-weight: 400;\n    font-size: 12px;\n    color: #6c757d;\n    font-style: italic;\n} */","import { Component, State, h, Listen, Prop, Method, Event } from '@stencil/core';\nimport fieldMapper from '../../utils/fieldMapper';\nimport evaluateRule from '../../utils/fieldEvaluator';\nimport { eFormField, iFormField } from '../../models/form-field.model';\n\n@Component({\n    tag: 'form-builder',\n    styleUrl: 'form-builder.component.css',\n    shadow: false,\n    scoped: false,\n})\nexport class FormBuilderComponent {\n    @Prop() formId?: string;\n    @Prop() formFields: iFormField[];\n    @Prop() language: string = 'en';\n    @Prop() actionUrl?: string;\n\n    @State() sortedFields: Map<string, iFormField>;\n\n    @Event({ bubbles: true, composed: true }) formUpdated: any;\n\n    connectedCallback() {\n        if (!this.formFields) return;\n\n        this.sortedFields = new Map(this.formFields.sort((a, b) => a.sequence - b.sequence).map(f => [f.key, f]));\n\n        for (let field of this.sortedFields.values()) {\n            field.errors = this.validateField(field);\n        }\n\n        this.evaluateAllRules();\n    }\n\n    @Listen('fieldBlurred')\n    handleFieldBlurred(event: CustomEvent<{ key: string }>) {\n        const field = this.sortedFields.get(event.detail.key);\n        if (!field) return;\n\n        Object.assign(field, {\n            isPristine: false,\n        });\n\n        field.errors = this.validateField(field);\n        this.evaluateAllRules();\n\n        this.sortedFields = new Map(this.sortedFields);\n    }\n\n    @Listen('valueChanged')\n    handleValueChange(event: CustomEvent<{ key: string; value: any }>) {\n        const field = this.sortedFields.get(event.detail.key);\n        if (!field) return;\n\n        Object.assign(field, {\n            value: event.detail.value,\n        });\n\n        field.errors = this.validateField(field);\n        this.evaluateAllRules();\n\n        this.sortedFields = new Map(this.sortedFields);\n\n        this.formUpdated.emit({\n            isValid: this.isFormValid(),\n            formFields: [...this.formFields.values()]\n                .filter(field => !field.hidden && !field.disabled && field.fieldType !== eFormField.legend)\n                .reduce((obj, field) => {\n                    obj[field.key] = {\n                        value: field.value,\n                        errors: field.errors,\n                    };\n                    return obj;\n                }, {} as { [key: string]: { value: any; errors: string[] } }),\n        });\n    }\n\n    private validateField(field: iFormField): string[] {\n        const value = field.fieldType == eFormField.file || field.fieldType == eFormField.multifile\n            ? field\n            : field.value;\n\n        return field.validators.map(validator => validator(field.fieldType, value, this.language || 'en')).filter(error => error) as string[];\n    }\n\n    private evaluateAllRules() {\n        this.sortedFields.forEach(field => {\n            let checkEnable = field.shouldEnable && field.fieldType !== eFormField.legend;\n            let checkDisplay = field.shouldDisplay && field.fieldType !== eFormField.legend;\n\n            // if (!field.shouldEnable || field.fieldType === eFormField.legend) return;\n\n            if (checkEnable) {\n                const shouldEnable = evaluateRule(field.shouldEnable, this.sortedFields);\n                field.disabled = !shouldEnable;\n\n                // Optional: clear value when disabled\n                if (!shouldEnable) {\n                    // field.value = null;\n                    field.errors = [];\n                    field.isPristine = true;\n                }\n            }\n\n            if (checkDisplay) {\n                const shouldDisplay = evaluateRule(field.shouldDisplay, this.sortedFields);\n                field.hidden = !shouldDisplay;\n\n                // Optional: clear value when disabled\n                if (!shouldDisplay) {\n                    field.value = null;\n                    field.errors = [];\n                    field.isPristine = true;\n                }\n            }\n        });\n\n        // Trigger rerender\n        this.sortedFields = new Map(this.sortedFields);\n    }\n\n    componentWillRender() {\n        if (!this.sortedFields) return;\n        for (const field of this.sortedFields?.values()) {\n            field.errors = this.validateField(field);\n        }\n    }\n\n    isFormValid(): boolean {\n        if (!this.sortedFields) return false;\n        let isValid = true;\n\n        for (const field of this.sortedFields.values()) {\n\n            if (field.hidden || field.disabled) continue;\n\n            if (field.errors.length) {\n                isValid = false;\n                break;\n            }\n        }\n\n        return isValid;\n    }\n\n    markAllFieldsTouched() {\n        if (!this.sortedFields) return;\n\n        this.sortedFields.forEach(field => {\n            field.isPristine = false;\n            field.errors = (field.hidden || field.disabled) ? [] : this.validateField(field);\n        });\n\n        this.sortedFields = new Map(this.sortedFields);\n    }\n\n    @Method()\n    getFormValues(): Promise<{ [key: string]: any }> {\n        return new Promise((resolve) => {\n            const payload: { [key: string]: any } = {};\n\n            if (!this.sortedFields) return payload;\n\n            for (const field of this.sortedFields.values()) {\n                if (field.fieldType === eFormField.legend) continue;\n\n                payload[field.key] = field.value;\n            }\n\n            resolve(payload);\n        });\n    }\n\n    @Method()\n    handleSubmit(): Promise<{ [key: string]: any }> {\n        return new Promise((resolve, reject) => {\n            this.evaluateAllRules();\n            if (!this.isFormValid()) {\n                this.markAllFieldsTouched();\n\n                reject({\n                    message: 'Form validation failed.',\n                    formFields: [...this.formFields.values()]\n                        .filter(field => !field.hidden && !field.disabled && field.fieldType !== eFormField.legend)\n                        .reduce((obj, field) => {\n                            obj[field.key] = {\n                                value: field.value,\n                                errors: field.errors,\n                            };\n                            return obj;\n                        }, {} as { [key: string]: { value: any; errors: string[] } }),\n\n                });\n                return;\n            }\n\n            const payload: { [key: string]: any } = [...this.sortedFields.values()]\n                .filter(field => field.fieldType !== eFormField.legend)\n                .reduce((object, field) => {\n                    object[field.key] = field.value;\n                    return object;\n                }, {});\n\n            if (this.actionUrl?.length) {\n                // If actionUrl is provided, submit the form data to the URL\n                const formElement = document.createElement('form');\n                formElement.method = 'POST';\n                formElement.action = this.actionUrl;\n                formElement.style.display = 'none';\n\n                for (const key in payload) {\n                    const inputElement = document.createElement('input');\n                    inputElement.type = 'hidden';\n                    inputElement.name = key;\n                    inputElement.value = payload[key];\n                    formElement.appendChild(inputElement);\n                }\n\n                document.body.appendChild(formElement);\n                formElement.submit();\n                document.body.removeChild(formElement);\n            }\n            else {\n                resolve(payload);\n            }\n\n\n        });\n    }\n\n    render() {\n        if (!this.sortedFields) { return null; }\n\n        const formContent = (\n            <div class=\"form-fields-grid\">\n                {[...this.sortedFields.values()].map((field, index) => {\n                    const error = field.errors.length && !field.isPristine && !field.hidden && !field.disabled ? (\n                        <span class=\"field-error\" style={{ order: '3' }}>\n                            {field.errors[0]}\n                        </span>\n                    ) : null;\n\n                    const attributes = {\n                        language: this.language || 'en',\n                        field,\n                        className: 'form-field-container', //`${field.key}-form-field`,\n                        part: `${field.key}-form-field`,\n                        isInvalid: field.errors.length && !field.isPristine,\n                        isDisabled: field.disabled ?? false,\n                        isHidden: field.hidden ?? false,\n                        value: field.value,\n                    };\n\n                    const checkableTypes = ['toggle', 'checkbox'];\n\n                    if (checkableTypes.includes(field.fieldType)) {\n                        Object.assign(attributes, { isChecked: field.value == true });\n                    }\n\n                    if (field.fieldType === eFormField.radio) {\n                        Object.assign(attributes, { value: field.value });\n                    }\n\n                    return (\n                        <div class={`field-col-span-${field.size}`}\n                            key={index}>\n                            {h(\n                                fieldMapper.get(field.fieldType),\n                                { ...attributes },\n                                error\n                            )}\n                        </div>\n                    )\n                })}\n\n                <div class=\"field-col-span-4\">\n                    <slot></slot>\n                </div>\n            </div>\n        );\n\n        return (\n            <form class=\"wd-custom-form\" id={this.formId || ''}>\n                {formContent}\n            </form>\n        );\n    }\n}\n\n"],"names":["fieldMapper"],"mappings":"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"}